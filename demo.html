<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>bd3-horizontal-bar-chart Demo</title>

    <script src="../platform/platform.js"></script>

    <link rel="import" href="bd3-horizontal-bar-chart.html">

</head>
<body unresolved>

<p>Here is an example of bd3-horizontal-bar-chart element</p>

<template id="autobind" is="auto-binding">
    <p>
        Title: <input type="text" value="{{title}}"/>
        Height: <input type="text" value="{{height}}"/>
        Width: <input type="text" value="{{width}}"/>
    </p>

    <p>
        Height is {{height}}, Width is {{width}}
    </p>

    <p>
        Selected Name: {{name}}<br>
        Selected Value: {{value}}
    </p>

    <bd3-horizontal-bar-chart title="{{title}}"
                              data="{{data}}"
                              width="{{width}}"
                              height="{{height}}"
                              on-bar-clicked="{{barClicked}}">
    </bd3-horizontal-bar-chart>


</template>

<script>

    addEventListener('polymer-ready', function () {
        var t = document.querySelector("#autobind");
        t.title = "My Horizontal Bar Chart";
        t.height = 400;
        t.width = 800;
        d3.csv("bachelors-degrees.csv", function (error, data) {
            data.forEach(function (d) {
                d.Total = +d.Total;
                d["Bachelor's degree"] = +d["Bachelor's degree"];
                d.percent = d["Bachelor's degree"] / d.Total;

            });
            t.data = data;
        });
        t.barClicked = function (e, detail) {
            console.log('bar-cliked = ' + JSON.stringify(detail));
            t.name = detail.Name;
            t.value = detail.Total;
        };
    });

</script>

</body>
</html>
